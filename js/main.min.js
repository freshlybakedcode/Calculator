"use strict";function toggleOperator(t){t.classList.toggle("selected")}function toggleOffAllOperators(){buttons.forEach(function(t){t.classList.contains("selected")&&toggleOperator(t)})}function handleOperator(t){var e=tempSum[tempSum.length-1];"*"===e||"+"===e||"-"===e||"/"===e?tempSum.pop():tempSum.push(getResult()),tempSum.push(t.dataset.value),clearBuffer()}function bufferJoined(){return buffer.join("")}function resetBuffer(){clearBuffer(),buffer.push(result)}function clearBuffer(){"Err"!==buffer[0]&&(buffer.length=0)}function throwError(){console.log("throwError() fired"),buffer=["Err"],console.log("buffer: "+buffer),updateOutput()}function updateOutput(t){console.log("updateOutput("+t+") fired.  typeof data = "+(void 0===t?"undefined":_typeof(t))+". buffer: "+buffer),t?("exception"===t&&(t="0",result=""),output.innerHTML=t):output.innerHTML=bufferJoined()}function getResult(){var firstDigitOfBuffer=buffer[0],lastDigitOfTempSum=tempSum[tempSum.length-1];if("-"===firstDigitOfBuffer&&"-"===lastDigitOfTempSum&&(buffer.shift(),tempSum.pop(),tempSum.push("+")),console.log("getResult() fired, "+(tempSum.join("")+bufferJoined())),result=eval(tempSum.join("")+bufferJoined()),result=result||"exception",console.log("getResult() returns "+result),console.log("result.length: "+result.length),!(String(result).replace(".","").length>maxDigits||"Infinity"==result))return buffer=[result],result;throwError()}function handleButtonPress(t){var e=t.path[0].dataset.value;"res"===e?(0===buffer.length&&buffer.push(0),"exception"===tempSum[0]&&(tempSum.shift(),tempSum.unshift("0")),toggleOffAllOperators(),updateOutput(getResult()),resetBuffer(),tempSum.length=0):"ce"===e?(buffer.length=0,updateOutput()):"c"===e?(buffer.length=0,tempSum.length=0,result=0,toggleOffAllOperators(),updateOutput("0")):t.path[0].classList.contains("operator")&&"Err"!==buffer[0]?0===buffer.length&&"-"===e?(buffer.push(e),updateOutput()):(toggleOffAllOperators(),toggleOperator(t.path[0]),handleOperator(t.path[0])):buffer.length>maxDigits||"Err"===buffer[0]||"Infinity"==buffer[0]?throwError():(buffer.push(e),updateOutput())}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},buffer=[],result=0,tempSum=[],maxDigits=9,buttons=document.querySelectorAll(".button"),output=document.querySelector(".output");buttons.forEach(function(t){return t.addEventListener("click",handleButtonPress)});